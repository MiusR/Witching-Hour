scoreboard players add @a chalkrunes 1
scoreboard players set @a chalkdurability 0
execute as @a[nbt={SelectedItem:{tag:{id:"gold_chalk"}}},gamemode=survival] store result score @s chalkdurability run data get entity @s SelectedItem.tag.Damage 1
execute as @a[nbt={SelectedItem:{tag:{id:"white_chalk"}}},gamemode=survival] store result score @s chalkdurability run data get entity @s SelectedItem.tag.Damage 1
execute as @a[nbt={SelectedItem:{tag:{id:"infernal_chalk"}}},gamemode=survival] store result score @s chalkdurability run data get entity @s SelectedItem.tag.Damage 1

execute as @a[scores={Rclick=1..},gamemode=survival] at @s unless entity @e[distance=..1,tag=cmgc] unless entity @e[distance=..1,tag=cmic] unless entity @e[distance=..1,tag=cmwc] unless block ~ ~ ~ water unless block ~ ~-1 ~ air run function mb:main/split/chalkplacment

execute as @a[nbt={SelectedItem:{tag:{id:"gold_chalk",Damage:25}}},gamemode=survival] run replaceitem entity @s weapon.mainhand minecraft:yellow_dye 1
execute as @a[nbt={SelectedItem:{tag:{id:"white_chalk",Damage:25}}},gamemode=survival] run replaceitem entity @s weapon.mainhand minecraft:white_dye 1
execute as @a[nbt={SelectedItem:{tag:{id:"infernal_chalk",Damage:25}}},gamemode=survival] run replaceitem entity @s weapon.mainhand minecraft:red_dye 1

execute as @e[tag=grc] at @s run function mb:main/split/chalkplacment
execute as @e[tag=wrc] at @s run function mb:main/split/chalkplacment
execute as @e[tag=irc] at @s run function mb:main/split/chalkplacment

execute as @e[tag=grc] at @s run kill @s
execute as @e[tag=wrc] at @s run kill @s
execute as @e[tag=irc] at @s run kill @s
execute as @e[tag=cmgc] at @s if block ~ ~-1 ~ air run kill @s
execute as @e[tag=cmwc] at @s if block ~ ~-1 ~ air run kill @s
execute as @e[tag=cmic] at @s if block ~ ~-1 ~ air run kill @s
execute as @e[tag=cmgc] at @s unless block ~ ~ ~ air run kill @s
execute as @e[tag=cmwc] at @s unless block ~ ~ ~ air run kill @s
execute as @e[tag=cmic] at @s unless block ~ ~ ~ air run kill @s
scoreboard players reset @a[scores={chalkrunes=6..}] chalkrunes

execute as @e[tag=cmgc] at @s positioned ~ ~ ~3 if entity @e[tag=cmwc,distance=..0.1] positioned ~1 ~ ~ if entity @e[tag=cmwc,distance=..0.1] positioned ~-2 ~ ~ if entity @e[tag=cmwc,distance=..0.1] positioned ~-1 ~ ~-1 if entity @e[tag=cmwc,distance=..0.1] positioned ~4 ~ ~ if entity @e[tag=cmwc,distance=..0.1] positioned ~ ~ ~-4 if entity @e[tag=cmwc,distance=..0.1] positioned ~-4 ~ ~ if entity @e[tag=cmwc,distance=..0.1] positioned ~-1 ~ ~1 if entity @e[tag=cmwc,distance=..0.1] positioned ~ ~ ~1 if entity @e[tag=cmwc,distance=..0.1] positioned ~ ~ ~1 if entity @e[tag=cmwc,distance=..0.1] positioned ~6 ~ ~ if entity @e[tag=cmwc,distance=..0.1] positioned ~ ~ ~-1 if entity @e[tag=cmwc,distance=..0.1] positioned ~ ~ ~-1 if entity @e[tag=cmwc,distance=..0.1] positioned ~-2 ~ ~-2 if entity @e[tag=cmwc,distance=..0.1] positioned ~-1 ~ ~ if entity @e[tag=cmwc,distance=..0.1] positioned ~-1 ~ ~ if entity @e[tag=cmwc,distance=..0.1] run effect give @s speed 1 255

execute as @e[tag=cmgc] at @s positioned ~ ~ ~3 if entity @e[tag=cmic,distance=..0.1] positioned ~1 ~ ~ if entity @e[tag=cmic,distance=..0.1] positioned ~-2 ~ ~ if entity @e[tag=cmic,distance=..0.1] positioned ~-1 ~ ~-1 if entity @e[tag=cmic,distance=..0.1] positioned ~4 ~ ~ if entity @e[tag=cmic,distance=..0.1] positioned ~ ~ ~-4 if entity @e[tag=cmic,distance=..0.1] positioned ~-4 ~ ~ if entity @e[tag=cmic,distance=..0.1] positioned ~-1 ~ ~1 if entity @e[tag=cmic,distance=..0.1] positioned ~ ~ ~1 if entity @e[tag=cmic,distance=..0.1] positioned ~ ~ ~1 if entity @e[tag=cmic,distance=..0.1] positioned ~6 ~ ~ if entity @e[tag=cmic,distance=..0.1] positioned ~ ~ ~-1 if entity @e[tag=cmic,distance=..0.1] positioned ~ ~ ~-1 if entity @e[tag=cmic,distance=..0.1] positioned ~-2 ~ ~-2 if entity @e[tag=cmic,distance=..0.1] positioned ~-1 ~ ~ if entity @e[tag=cmic,distance=..0.1] positioned ~-1 ~ ~ if entity @e[tag=cmic,distance=..0.1] run effect give @s blindness 1 255

execute as @e[tag=cmgc] at @s positioned ~2 ~ ~5 if entity @e[tag=cmwc,distance=..0.1] positioned ~-1 ~ ~ if entity @e[tag=cmwc,distance=..0.1] positioned ~-1 ~ ~ if entity @e[tag=cmwc,distance=..0.1] positioned ~-1 ~ ~ if entity @e[tag=cmwc,distance=..0.1] positioned ~-1 ~ ~ if entity @e[tag=cmwc,distance=..0.1] positioned ~-1 ~ ~-1 if entity @e[tag=cmwc,distance=..0.1] positioned ~-1 ~ ~-1 if entity @e[tag=cmwc,distance=..0.1] positioned ~-1 ~ ~-1 if entity @e[tag=cmwc,distance=..0.1] positioned ~ ~ ~-1 if entity @e[tag=cmwc,distance=..0.1] positioned ~ ~ ~-1 if entity @e[tag=cmwc,distance=..0.1] positioned ~ ~ ~-1 if entity @e[tag=cmwc,distance=..0.1] positioned ~ ~ ~-1 if entity @e[tag=cmwc,distance=..0.1] positioned ~1 ~ ~-1 if entity @e[tag=cmwc,distance=..0.1] positioned ~1 ~ ~-1 if entity @e[tag=cmwc,distance=..0.1] positioned ~1 ~ ~-1 if entity @e[tag=cmwc,distance=..0.1] positioned ~1 ~ ~ if entity @e[tag=cmwc,distance=..0.1] positioned ~1 ~ ~ if entity @e[tag=cmwc,distance=..0.1] positioned ~1 ~ ~ if entity @e[tag=cmwc,distance=..0.1] positioned ~1 ~ ~ if entity @e[tag=cmwc,distance=..0.1] positioned ~1 ~ ~1 if entity @e[tag=cmwc,distance=..0.1] positioned ~1 ~ ~1 if entity @e[tag=cmwc,distance=..0.1] positioned ~1 ~ ~1 if entity @e[tag=cmwc,distance=..0.1] positioned ~ ~ ~1 if entity @e[tag=cmwc,distance=..0.1] positioned ~ ~ ~1 if entity @e[tag=cmwc,distance=..0.1] positioned ~ ~ ~1 if entity @e[tag=cmwc,distance=..0.1] positioned ~ ~ ~1 if entity @e[tag=cmwc,distance=..0.1] positioned ~-1 ~ ~1 if entity @e[tag=cmwc,distance=..0.1] positioned ~-1 ~ ~1 if entity @e[tag=cmwc,distance=..0.1] run effect give @s strength 1 255

execute as @e[tag=cmgc] at @s positioned ~3 ~ ~7 if entity @e[tag=cmwc,distance=..0.1] positioned ~-1 ~ ~ if entity @e[tag=cmwc,distance=..0.1] positioned ~-1 ~ ~ if entity @e[tag=cmwc,distance=..0.1] positioned ~-1 ~ ~ if entity @e[tag=cmwc,distance=..0.1] positioned ~-1 ~ ~ if entity @e[tag=cmwc,distance=..0.1] positioned ~-1 ~ ~ if entity @e[tag=cmwc,distance=..0.1] positioned ~-1 ~ ~ if entity @e[tag=cmwc,distance=..0.1] positioned ~-1 ~ ~-1 if entity @e[tag=cmwc,distance=..0.1] positioned ~-1 ~ ~-1 if entity @e[tag=cmwc,distance=..0.1] positioned ~-1 ~ ~-1 if entity @e[tag=cmwc,distance=..0.1] positioned ~-1 ~ ~-1 if entity @e[tag=cmwc,distance=..0.1] positioned ~ ~ ~-1 if entity @e[tag=cmwc,distance=..0.1] positioned ~ ~ ~-1 if entity @e[tag=cmwc,distance=..0.1] positioned ~ ~ ~-1 if entity @e[tag=cmwc,distance=..0.1] positioned ~ ~ ~-1 if entity @e[tag=cmwc,distance=..0.1] positioned ~ ~ ~-1 if entity @e[tag=cmwc,distance=..0.1] positioned ~ ~ ~-1 if entity @e[tag=cmwc,distance=..0.1] positioned ~1 ~ ~-1 if entity @e[tag=cmwc,distance=..0.1] positioned ~1 ~ ~-1 if entity @e[tag=cmwc,distance=..0.1] positioned ~1 ~ ~-1 if entity @e[tag=cmwc,distance=..0.1] positioned ~1 ~ ~-1 if entity @e[tag=cmwc,distance=..0.1] positioned ~1 ~ ~ if entity @e[tag=cmwc,distance=..0.1] positioned ~1 ~ ~ if entity @e[tag=cmwc,distance=..0.1] positioned ~1 ~ ~ if entity @e[tag=cmwc,distance=..0.1] positioned ~1 ~ ~ if entity @e[tag=cmwc,distance=..0.1] positioned ~1 ~ ~ if entity @e[tag=cmwc,distance=..0.1] positioned ~1 ~ ~ if entity @e[tag=cmwc,distance=..0.1] positioned ~1 ~ ~1 if entity @e[tag=cmwc,distance=..0.1] positioned ~1 ~ ~1 if entity @e[tag=cmwc,distance=..0.1] positioned ~1 ~ ~1 if entity @e[tag=cmwc,distance=..0.1] positioned ~1 ~ ~1 if entity @e[tag=cmwc,distance=..0.1] positioned ~ ~ ~1 if entity @e[tag=cmwc,distance=..0.1] positioned ~ ~ ~1 if entity @e[tag=cmwc,distance=..0.1] positioned ~ ~ ~1 if entity @e[tag=cmwc,distance=..0.1] positioned ~ ~ ~1 if entity @e[tag=cmwc,distance=..0.1] positioned ~ ~ ~1 if entity @e[tag=cmwc,distance=..0.1] positioned ~ ~ ~1 if entity @e[tag=cmwc,distance=..0.1] positioned ~-1 ~ ~1 if entity @e[tag=cmwc,distance=..0.1] positioned ~-1 ~ ~1 if entity @e[tag=cmwc,distance=..0.1] positioned ~-1 ~ ~1 if entity @e[tag=cmwc,distance=..0.1] run effect give @s luck 1 255

execute as @e[tag=cmgc] at @s positioned ~2 ~ ~5 if entity @e[tag=cmic,distance=..0.1] positioned ~-1 ~ ~ if entity @e[tag=cmic,distance=..0.1] positioned ~-1 ~ ~ if entity @e[tag=cmic,distance=..0.1] positioned ~-1 ~ ~ if entity @e[tag=cmic,distance=..0.1] positioned ~-1 ~ ~ if entity @e[tag=cmic,distance=..0.1] positioned ~-1 ~ ~-1 if entity @e[tag=cmic,distance=..0.1] positioned ~-1 ~ ~-1 if entity @e[tag=cmic,distance=..0.1] positioned ~-1 ~ ~-1 if entity @e[tag=cmic,distance=..0.1] positioned ~ ~ ~-1 if entity @e[tag=cmic,distance=..0.1] positioned ~ ~ ~-1 if entity @e[tag=cmic,distance=..0.1] positioned ~ ~ ~-1 if entity @e[tag=cmic,distance=..0.1] positioned ~ ~ ~-1 if entity @e[tag=cmic,distance=..0.1] positioned ~1 ~ ~-1 if entity @e[tag=cmic,distance=..0.1] positioned ~1 ~ ~-1 if entity @e[tag=cmic,distance=..0.1] positioned ~1 ~ ~-1 if entity @e[tag=cmic,distance=..0.1] positioned ~1 ~ ~ if entity @e[tag=cmic,distance=..0.1] positioned ~1 ~ ~ if entity @e[tag=cmic,distance=..0.1] positioned ~1 ~ ~ if entity @e[tag=cmic,distance=..0.1] positioned ~1 ~ ~ if entity @e[tag=cmic,distance=..0.1] positioned ~1 ~ ~1 if entity @e[tag=cmic,distance=..0.1] positioned ~1 ~ ~1 if entity @e[tag=cmic,distance=..0.1] positioned ~1 ~ ~1 if entity @e[tag=cmic,distance=..0.1] positioned ~ ~ ~1 if entity @e[tag=cmic,distance=..0.1] positioned ~ ~ ~1 if entity @e[tag=cmic,distance=..0.1] positioned ~ ~ ~1 if entity @e[tag=cmic,distance=..0.1] positioned ~ ~ ~1 if entity @e[tag=cmic,distance=..0.1] positioned ~-1 ~ ~1 if entity @e[tag=cmic,distance=..0.1] positioned ~-1 ~ ~1 if entity @e[tag=cmic,distance=..0.1] run effect give @s fire_resistance 1 255

execute as @e[tag=cmgc] at @s positioned ~3 ~ ~7 if entity @e[tag=cmic,distance=..0.1] positioned ~-1 ~ ~ if entity @e[tag=cmic,distance=..0.1] positioned ~-1 ~ ~ if entity @e[tag=cmic,distance=..0.1] positioned ~-1 ~ ~ if entity @e[tag=cmic,distance=..0.1] positioned ~-1 ~ ~ if entity @e[tag=cmic,distance=..0.1] positioned ~-1 ~ ~ if entity @e[tag=cmic,distance=..0.1] positioned ~-1 ~ ~ if entity @e[tag=cmic,distance=..0.1] positioned ~-1 ~ ~-1 if entity @e[tag=cmic,distance=..0.1] positioned ~-1 ~ ~-1 if entity @e[tag=cmic,distance=..0.1] positioned ~-1 ~ ~-1 if entity @e[tag=cmic,distance=..0.1] positioned ~-1 ~ ~-1 if entity @e[tag=cmic,distance=..0.1] positioned ~ ~ ~-1 if entity @e[tag=cmic,distance=..0.1] positioned ~ ~ ~-1 if entity @e[tag=cmic,distance=..0.1] positioned ~ ~ ~-1 if entity @e[tag=cmic,distance=..0.1] positioned ~ ~ ~-1 if entity @e[tag=cmic,distance=..0.1] positioned ~ ~ ~-1 if entity @e[tag=cmic,distance=..0.1] positioned ~ ~ ~-1 if entity @e[tag=cmic,distance=..0.1] positioned ~1 ~ ~-1 if entity @e[tag=cmic,distance=..0.1] positioned ~1 ~ ~-1 if entity @e[tag=cmic,distance=..0.1] positioned ~1 ~ ~-1 if entity @e[tag=cmic,distance=..0.1] positioned ~1 ~ ~-1 if entity @e[tag=cmic,distance=..0.1] positioned ~1 ~ ~ if entity @e[tag=cmic,distance=..0.1] positioned ~1 ~ ~ if entity @e[tag=cmic,distance=..0.1] positioned ~1 ~ ~ if entity @e[tag=cmic,distance=..0.1] positioned ~1 ~ ~ if entity @e[tag=cmic,distance=..0.1] positioned ~1 ~ ~ if entity @e[tag=cmic,distance=..0.1] positioned ~1 ~ ~ if entity @e[tag=cmic,distance=..0.1] positioned ~1 ~ ~1 if entity @e[tag=cmic,distance=..0.1] positioned ~1 ~ ~1 if entity @e[tag=cmic,distance=..0.1] positioned ~1 ~ ~1 if entity @e[tag=cmic,distance=..0.1] positioned ~1 ~ ~1 if entity @e[tag=cmic,distance=..0.1] positioned ~ ~ ~1 if entity @e[tag=cmic,distance=..0.1] positioned ~ ~ ~1 if entity @e[tag=cmic,distance=..0.1] positioned ~ ~ ~1 if entity @e[tag=cmic,distance=..0.1] positioned ~ ~ ~1 if entity @e[tag=cmic,distance=..0.1] positioned ~ ~ ~1 if entity @e[tag=cmic,distance=..0.1] positioned ~ ~ ~1 if entity @e[tag=cmic,distance=..0.1] positioned ~-1 ~ ~1 if entity @e[tag=cmic,distance=..0.1] positioned ~-1 ~ ~1 if entity @e[tag=cmic,distance=..0.1] positioned ~-1 ~ ~1 if entity @e[tag=cmic,distance=..0.1] run effect give @s hunger 1 255